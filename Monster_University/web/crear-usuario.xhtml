<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Crear Nuevo Usuario</title>
    
    <script>
        function debug(message) {
            console.log("[DEBUG] " + message);
        }
        
        function debugError(message) {
            console.error("[ERROR] " + message);
        }
        
        function debugSuccess(message) {
            console.log("‚úÖ " + message);
        }
        
        console.log("=== FORMULARIO CREAR USUARIO CARGADO ===");
    </script>
    
    <style>
        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .actions {
            margin-top: 20px;
            text-align: center;
        }
    </style>
</h:head>

<h:body>
    <div class="container">
        <h1>üë§ Crear Nuevo Usuario</h1>
        
        <h:form id="formCrearUsuario">
            <p:panel header="Datos del Usuario">
                <!-- ID Usuario -->
                <div class="form-group">
                    <h:outputLabel for="xeusuId" value="ID Usuario *" styleClass="form-label"/>
                    <p:inputText id="xeusuId" value="#{crearUsuarioController.nuevoUsuario.xeusuId}" 
                               maxlength="5" style="width: 100px"
                               placeholder="Ej: USR01"
                               onchange="debug('ID Usuario cambiado: ' + this.value)"/>
                    <p:message for="xeusuId" display="icon"/>
                </div>

                <!-- Nombre -->
                <div class="form-group">
                    <h:outputLabel for="xeusuNombre" value="Nombre Completo *" styleClass="form-label"/>
                    <p:inputText id="xeusuNombre" value="#{crearUsuarioController.nuevoUsuario.xeusuNombre}" 
                               maxlength="100" style="width: 300px"
                               placeholder="Nombre del usuario"
                               onchange="debug('Nombre cambiado: ' + this.value)"/>
                    <p:message for="xeusuNombre" display="icon"/>
                </div>

                <!-- Contrase√±a -->
                <div class="form-group">
                    <h:outputLabel for="xeusuContra" value="Contrase√±a *" styleClass="form-label"/>
                    <p:password id="xeusuContra" value="#{crearUsuarioController.nuevoUsuario.xeusuContra}" 
                              feedback="true" promptLabel="Ingresa contrase√±a" 
                              weakLabel="D√©bil" goodLabel="Buena" strongLabel="Fuerte"
                              style="width: 200px"
                              onchange="debug('Contrase√±a cambiada (longitud): ' + this.value.length)"/>
                    <p:message for="xeusuContra" display="icon"/>
                </div>

                <!-- Confirmar Contrase√±a -->
                <div class="form-group">
                    <h:outputLabel for="confirmarContrasena" value="Confirmar Contrase√±a *" styleClass="form-label"/>
                    <p:password id="confirmarContrasena" value="#{crearUsuarioController.confirmarContrasena}" 
                              style="width: 200px"
                              onchange="debug('Confirmar contrase√±a cambiada (longitud): ' + this.value.length)"/>
                    <p:message for="confirmarContrasena" display="icon"/>
                </div>

                <!-- Estado -->
                <div class="form-group">
                    <h:outputLabel for="xeusuEstado" value="Estado *" styleClass="form-label"/>
                    <p:selectOneMenu id="xeusuEstado" value="#{crearUsuarioController.nuevoUsuario.xeusuEstado}" 
                                   style="width: 150px"
                                   onchange="debug('Estado seleccionado: ' + this.value)">
                        <f:selectItem itemLabel="Seleccione estado" itemValue=""/>
                        <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO"/>
                        <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO"/>
                    </p:selectOneMenu>
                    <p:message for="xeusuEstado" display="icon"/>
                </div>

                <!-- Botones de acci√≥n -->
                <div class="actions">
                    <p:commandButton value="üíæ Crear Usuario" 
                                   action="#{crearUsuarioController.crearUsuario}"
                                   update="@form :growl"
                                   icon="pi pi-save"
                                   style="margin-right: 10px;"
                                   onstart="debug('=== INICIANDO CREACI√ìN DE USUARIO ==='); 
                                            debug('Haciendo click en Crear Usuario...');"/>
                    
                    <p:commandButton value="üîÑ Limpiar" 
                                   action="#{crearUsuarioController.initNuevoUsuario}"
                                   update="@form :growl"
                                   immediate="true"
                                   icon="pi pi-refresh"
                                   onstart="debug('Limpiando formulario...')"/>
                </div>
            </p:panel>
        </h:form>

        <!-- Mensajes globales -->
        <p:growl id="growl" showDetail="true" life="3000"/>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                console.log("üìù INSTRUCCIONES:");
                console.log("1. Llena el formulario");
                console.log("2. Haz click en 'Crear Usuario'");
                console.log("3. Revisa los mensajes aqu√≠ debajo");
                console.log("4. Si hay errores, se mostrar√°n en rojo");
            });
        </script>
    </div>
</h:body>
</html>